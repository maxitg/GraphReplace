// Provide the path of the python executable, if python is available as environment variable then you can use only "python"
var pythonExecutable = "python";
var file = process.argv[2];

// Function to convert an Uint8Array to a string
var uint8arrayToString = function(data){
    return String.fromCharCode.apply(null, data);
};

const spawn = require('child_process').spawn;
const scriptExecution = spawn(pythonExecutable, ["../lib/cpplint.py", file]);

// Handle normal output
scriptExecution.stdout.on('data', (data) => {
    console.log(uint8arrayToString(data));
});

// Handle error output
scriptExecution.stderr.on('data', (data) => {
    // As said before, convert the Uint8Array to a readable string.
    console.log(uint8arrayToString(data));
});

scriptExecution.on('exit', (code) => {
    if (code === 0) {
      console.error('linter passed!');
      process.exit(0);
    } else {
      process.exit(1);
    }
});
